<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Bus SÃ©mantique</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link href='https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Mono' rel='stylesheet' type='text/css'>
  <link href='https://cdn.jsdelivr.net/semantic-ui/2.1.8/semantic.min.css' rel='stylesheet' type='text/css'>
  <link href='./css/flex.css' rel='stylesheet' type='text/css'>
  <link href='./css/main.css' rel='stylesheet' type='text/css'>
  <link href='./js/jsonEditor/dist/jsoneditor.min.css' rel='stylesheet' type='text/css'>
</head>

<body>
  <login></login>
  <style>
      body{
    font-family: 'Open Sans', sans-serif;
    background:#3498db;
    margin: 0 auto 0 auto;  
    width:100%; 
    text-align:center; 
  }</style>
  <script src="https://cdn.jsdelivr.net/riot/2.6.2/riot+compiler.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
  <script src="./js/RiotControl/riotcontrol.js"></script>
  <script src="./store/userStore.js"></script>
  <script type="riot/tag" src="tag/login.tag"></script>
  <script>


  var userStore = new UserStore(); // Create a store instance.
  RiotControl.addStore(userStore); // Register the store in central dispatch.
  RiotControl.on('application_redirect', function(){
    console.log("trigger");
    window.open("../ihm/application.html", "_self");
  })
  console.log(window.location.href)
  if(window.location.href.substr(0, 5) != "https"){
    if(window.location.href.indexOf('localhost') == -1){
      window.location.replace("https" + window.location.href.substr(4, window.location.href.split("").length -1))
      // window.location.replace("https" + window.location.href.substr(5, window.location.href.split("").length -1))
    }
  }
  riot.compile(function() {
    // here tags are compiled and riot.mount works synchronously
    var tags = riot.mount('*');
    /*RiotControl.on('previewJSON',function(message){
      tags[2].data=message.data;
    }.bind(this));*/
  });


  </script>
</body>

</html>
